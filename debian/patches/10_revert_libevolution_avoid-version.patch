Author: Jordi Mallach <jordi@debian.org>
Description: Revert 160006402248075b95c98e9e34d4538670ba7480
 Revert upstream patch that adds -avoid-version to all libevolution
 libs, making them versionless. This is a massive WTF.
Bug-GNOME: https://bugzilla.gnome.org/show_bug.cgi?id=591436
Forwarded: no

---
diff --git a/addressbook/gui/contact-editor/Makefile.am b/addressbook/gui/contact-editor/Makefile.am
index 7664e3d..1b4ed83 100644
--- a/addressbook/gui/contact-editor/Makefile.am
+++ b/addressbook/gui/contact-editor/Makefile.am
@@ -23,7 +23,7 @@ libecontacteditor_la_SOURCES = 			\
 	e-contact-quick-add.c			\
 	e-contact-quick-add.h
 
-libecontacteditor_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libecontacteditor_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libecontacteditor_la_LIBADD =						\
 	$(top_builddir)/e-util/libeutil.la				\
diff --git a/addressbook/gui/contact-list-editor/Makefile.am b/addressbook/gui/contact-list-editor/Makefile.am
index e73b895..bf80738 100644
--- a/addressbook/gui/contact-list-editor/Makefile.am
+++ b/addressbook/gui/contact-list-editor/Makefile.am
@@ -19,7 +19,7 @@ libecontactlisteditor_la_SOURCES = 		\
 	e-contact-list-model.c			\
 	e-contact-list-model.h
 
-libecontactlisteditor_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libecontactlisteditor_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libecontactlisteditor_la_LIBADD =				\
 	$(top_builddir)/addressbook/util/libeabutil.la		\
diff --git a/addressbook/importers/Makefile.am b/addressbook/importers/Makefile.am
index 6345d29..4337421 100644
--- a/addressbook/importers/Makefile.am
+++ b/addressbook/importers/Makefile.am
@@ -18,7 +18,7 @@ libevolution_addressbook_importers_la_SOURCES = \
 	evolution-csv-importer.c	        \
 	evolution-addressbook-importers.h
 
-libevolution_addressbook_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_addressbook_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_addressbook_importers_la_LIBADD = \
 	$(top_builddir)/e-util/libeutil.la 				\
diff --git a/addressbook/util/Makefile.am b/addressbook/util/Makefile.am
index 83bf1e7..0c1af2f 100644
--- a/addressbook/util/Makefile.am
+++ b/addressbook/util/Makefile.am
@@ -19,7 +19,7 @@ libeabutil_la_SOURCES =					\
 	eab-book-util.c					\
 	eab-book-util.h
 
-libeabutil_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libeabutil_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libeabutil_la_LIBADD =					\
 	$(top_builddir)/e-util/libeutil.la		\
diff --git a/calendar/gui/Makefile.am b/calendar/gui/Makefile.am
index b086902..140df3b 100644
--- a/calendar/gui/Makefile.am
+++ b/calendar/gui/Makefile.am
@@ -212,7 +212,7 @@ libevolution_calendar_la_LIBADD =					\
 	$(GTKHTML_LIBS)							\
 	$(LIBSOUP_LIBS)
 
-libevolution_calendar_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_calendar_la_LDFLAGS =  $(NO_UNDEFINED)
 
 EXTRA_DIST =	 			\
 	$(ui_DATA)			\
diff --git a/calendar/importers/Makefile.am b/calendar/importers/Makefile.am
index a6fb303..de55265 100644
--- a/calendar/importers/Makefile.am
+++ b/calendar/importers/Makefile.am
@@ -15,7 +15,7 @@ libevolution_calendar_importers_la_SOURCES = \
 	evolution-calendar-importer.h	     \
 	icalendar-importer.c
 
-libevolution_calendar_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_calendar_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_calendar_importers_la_LIBADD =			\
 	$(top_builddir)/e-util/libeutil.la 			\
diff --git a/composer/Makefile.am b/composer/Makefile.am
index 8c9425a..4cda3c6 100644
--- a/composer/Makefile.am
+++ b/composer/Makefile.am
@@ -52,7 +52,7 @@ libcomposer_la_SOURCES = 			\
 	e-composer-text-header.c		\
 	e-msg-composer.c
 
-libcomposer_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libcomposer_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libcomposer_la_LIBADD =					\
 	$(top_builddir)/e-util/libeutil.la		\
diff --git a/e-util/Makefile.am b/e-util/Makefile.am
index 9fa1877..0a38d57 100644
--- a/e-util/Makefile.am
+++ b/e-util/Makefile.am
@@ -583,7 +583,7 @@ libeutil_la_SOURCES = \
 	$(PLATFORM_SOURCES) \
 	$(NULL)
 
-libeutil_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libeutil_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libeutil_la_LIBADD =  \
 	$(top_builddir)/libgnomecanvas/libgnomecanvas.la \
diff --git a/em-format/Makefile.am b/em-format/Makefile.am
index f26a004..0b46d56 100644
--- a/em-format/Makefile.am
+++ b/em-format/Makefile.am
@@ -94,7 +94,7 @@ libemformat_la_SOURCES =				\
 	e-mail-stripsig-filter.c			\
 	$(SMIME_EXTENSIONS)
 
-libemformat_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libemformat_la_LDFLAGS =  $(NO_UNDEFINED)
 
 
 if ENABLE_SMIME
diff --git a/libemail-engine/Makefile.am b/libemail-engine/Makefile.am
index 60a8437..e454862 100644
--- a/libemail-engine/Makefile.am
+++ b/libemail-engine/Makefile.am
@@ -76,7 +76,7 @@ libemail_engine_la_LIBADD = \
 	$(GTKHTML_LIBS) \
 	$(NULL)
 
-libemail_engine_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libemail_engine_la_LDFLAGS =  $(NO_UNDEFINED)
 
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = libemail-engine.pc
diff --git a/libgnomecanvas/Makefile.am b/libgnomecanvas/Makefile.am
index a1eb3f1..a772e01 100644
--- a/libgnomecanvas/Makefile.am
+++ b/libgnomecanvas/Makefile.am
@@ -53,7 +53,7 @@ libgnomecanvas_la_LIBADD = \
 	$(GNOME_PLATFORM_LIBS) \
 	$(MATH_LIB)
 
-libgnomecanvas_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libgnomecanvas_la_LDFLAGS =  $(NO_UNDEFINED)
 
 BUILT_SOURCES = $(MARSHAL_GENERATED)
 
diff --git a/mail/Makefile.am b/mail/Makefile.am
index c0fdeb3..90accf2 100644
--- a/mail/Makefile.am
+++ b/mail/Makefile.am
@@ -206,7 +206,7 @@ libevolution_mail_la_LIBADD =				\
 	$(LIBSOUP_LIBS)					\
 	-lresolv
 
-libevolution_mail_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_mail_la_DEPENDENCIES = em-filter-i18n.h
 
diff --git a/mail/importers/Makefile.am b/mail/importers/Makefile.am
index 339bbe2..13cfa43 100644
--- a/mail/importers/Makefile.am
+++ b/mail/importers/Makefile.am
@@ -18,7 +18,7 @@ libevolution_mail_importers_la_SOURCES =	\
 	pine-importer.c				\
 	evolution-mbox-importer.c
 
-libevolution_mail_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_mail_importers_la_LIBADD =				\
 	$(top_builddir)/e-util/libeutil.la			\
diff --git a/shell/Makefile.am b/shell/Makefile.am
index d1d3fdb..d7cbb78 100644
--- a/shell/Makefile.am
+++ b/shell/Makefile.am
@@ -84,7 +84,7 @@ libeshell_la_SOURCES =				\
 	evo-version.h				\
 	es-event.c
 
-libeshell_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libeshell_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libeshell_la_LIBADD =					\
 	$(top_builddir)/e-util/libeutil.la		\
diff --git a/smime/gui/Makefile.am b/smime/gui/Makefile.am
index 1a867d5..278a70d 100644
--- a/smime/gui/Makefile.am
+++ b/smime/gui/Makefile.am
@@ -44,7 +44,7 @@ libevolution_smime_la_LIBADD =				\
 	$(GTKHTML_LIBS)					\
 	$(CERT_UI_LIBS)
 
-libevolution_smime_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_smime_la_LDFLAGS =  $(NO_UNDEFINED)
 
 ui_DATA = smime-ui.ui
 
diff --git a/smime/lib/Makefile.am b/smime/lib/Makefile.am
index 634c982..44eb986 100644
--- a/smime/lib/Makefile.am
+++ b/smime/lib/Makefile.am
@@ -36,6 +36,6 @@ libessmime_la_LIBADD =				\
 	$(GTKHTML_LIBS)				\
 	$(CERT_UI_LIBS)
 
-libessmime_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libessmime_la_LDFLAGS =  $(NO_UNDEFINED)
 
 -include $(top_srcdir)/git.mk
