Author: Jordi Mallach <jordi@debian.org>
Description: Revert 160006402248075b95c98e9e34d4538670ba7480
 Revert upstream patch that adds -avoid-version to all libevolution
 libs, making them versionless. This is a massive WTF.
Bug-GNOME: https://bugzilla.gnome.org/show_bug.cgi?id=591436
Forwarded: no

---
Index: evolution-3.10.1/addressbook/gui/contact-editor/Makefile.am
===================================================================
--- evolution-3.10.1.orig/addressbook/gui/contact-editor/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/addressbook/gui/contact-editor/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -23,7 +23,7 @@
 	e-contact-quick-add.c			\
 	e-contact-quick-add.h
 
-libecontacteditor_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libecontacteditor_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libecontacteditor_la_LIBADD =						\
 	$(top_builddir)/e-util/libevolution-util.la			\
Index: evolution-3.10.1/addressbook/gui/contact-list-editor/Makefile.am
===================================================================
--- evolution-3.10.1.orig/addressbook/gui/contact-list-editor/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/addressbook/gui/contact-list-editor/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -19,7 +19,7 @@
 	e-contact-list-model.c			\
 	e-contact-list-model.h
 
-libecontactlisteditor_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libecontactlisteditor_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libecontactlisteditor_la_LIBADD =				\
 	$(top_builddir)/addressbook/util/libeabutil.la		\
Index: evolution-3.10.1/addressbook/importers/Makefile.am
===================================================================
--- evolution-3.10.1.orig/addressbook/importers/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/addressbook/importers/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -18,7 +18,7 @@
 	evolution-csv-importer.c	        \
 	evolution-addressbook-importers.h
 
-libevolution_addressbook_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_addressbook_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_addressbook_importers_la_LIBADD = \
 	$(top_builddir)/e-util/libevolution-util.la 			\
Index: evolution-3.10.1/addressbook/util/Makefile.am
===================================================================
--- evolution-3.10.1.orig/addressbook/util/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/addressbook/util/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -19,7 +19,7 @@
 	eab-book-util.c					\
 	eab-book-util.h
 
-libeabutil_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libeabutil_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libeabutil_la_LIBADD =					\
 	$(top_builddir)/e-util/libevolution-util.la	\
Index: evolution-3.10.1/calendar/gui/Makefile.am
===================================================================
--- evolution-3.10.1.orig/calendar/gui/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/calendar/gui/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -209,7 +209,7 @@
 	$(GTKHTML_LIBS)							\
 	$(LIBSOUP_LIBS)
 
-libevolution_calendar_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_calendar_la_LDFLAGS =  $(NO_UNDEFINED)
 
 EXTRA_DIST =	 			\
 	$(ui_DATA)			\
Index: evolution-3.10.1/calendar/importers/Makefile.am
===================================================================
--- evolution-3.10.1.orig/calendar/importers/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/calendar/importers/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -15,7 +15,7 @@
 	evolution-calendar-importer.h	     \
 	icalendar-importer.c
 
-libevolution_calendar_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_calendar_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_calendar_importers_la_LIBADD =			\
 	$(top_builddir)/e-util/libevolution-util.la		\
Index: evolution-3.10.1/composer/Makefile.am
===================================================================
--- evolution-3.10.1.orig/composer/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/composer/Makefile.am	2013-10-20 10:18:01.594260146 +0200
@@ -52,7 +52,7 @@
 	e-composer-text-header.c		\
 	e-msg-composer.c
 
-libevolution_mail_composer_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_composer_la_LDFLAGS = $(NO_UNDEFINED)
 
 libevolution_mail_composer_la_LIBADD =			\
 	$(top_builddir)/e-util/libevolution-util.la	\
Index: evolution-3.10.1/e-util/Makefile.am
===================================================================
--- evolution-3.10.1.orig/e-util/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/e-util/Makefile.am	2013-10-20 10:18:29.186395482 +0200
@@ -565,7 +565,7 @@
 	$(PLATFORM_SOURCES) \
 	$(NULL)
 
-libevolution_util_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_util_la_LDFLAGS = $(NO_UNDEFINED)
 
 libevolution_util_la_LIBADD =  \
 	$(top_builddir)/libgnomecanvas/libgnomecanvas.la \
Index: evolution-3.10.1/em-format/Makefile.am
===================================================================
--- evolution-3.10.1.orig/em-format/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/em-format/Makefile.am	2013-10-20 10:23:16.963806978 +0200
@@ -120,7 +120,7 @@
 	e-mail-stripsig-filter.c			\
 	$(SMIME_EXTENSIONS)
 
-libevolution_mail_formatter_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_formatter_la_LDFLAGS = $(NO_UNDEFINED)
 
 if ENABLE_SMIME
 SMIME_LIBS =						\
Index: evolution-3.10.1/libemail-engine/Makefile.am
===================================================================
--- evolution-3.10.1.orig/libemail-engine/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/libemail-engine/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -81,7 +81,7 @@
 	$(GTKHTML_LIBS) \
 	$(NULL)
 
-libemail_engine_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libemail_engine_la_LDFLAGS =  $(NO_UNDEFINED)
 
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = libemail-engine.pc
Index: evolution-3.10.1/libgnomecanvas/Makefile.am
===================================================================
--- evolution-3.10.1.orig/libgnomecanvas/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/libgnomecanvas/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -53,7 +53,7 @@
 	$(GNOME_PLATFORM_LIBS) \
 	$(MATH_LIB)
 
-libgnomecanvas_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libgnomecanvas_la_LDFLAGS =  $(NO_UNDEFINED)
 
 BUILT_SOURCES = $(MARSHAL_GENERATED)
 
Index: evolution-3.10.1/mail/Makefile.am
===================================================================
--- evolution-3.10.1.orig/mail/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/mail/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -206,7 +206,7 @@
 	$(LIBSOUP_LIBS)					\
 	-lresolv
 
-libevolution_mail_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_mail_la_DEPENDENCIES = em-filter-i18n.h
 
Index: evolution-3.10.1/mail/importers/Makefile.am
===================================================================
--- evolution-3.10.1.orig/mail/importers/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/mail/importers/Makefile.am	2013-10-20 10:16:38.673853437 +0200
@@ -18,7 +18,7 @@
 	pine-importer.c				\
 	evolution-mbox-importer.c
 
-libevolution_mail_importers_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_mail_importers_la_LDFLAGS =  $(NO_UNDEFINED)
 
 libevolution_mail_importers_la_LIBADD =				\
 	$(top_builddir)/e-util/libevolution-util.la		\
Index: evolution-3.10.1/shell/Makefile.am
===================================================================
--- evolution-3.10.1.orig/shell/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/shell/Makefile.am	2013-10-20 10:23:51.899978335 +0200
@@ -85,7 +85,7 @@
 	evo-version.h				\
 	$(NULL)
 
-libevolution_shell_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_shell_la_LDFLAGS = $(NO_UNDEFINED)
 
 libevolution_shell_la_LIBADD =				\
 	$(top_builddir)/e-util/libevolution-util.la	\
Index: evolution-3.10.1/smime/gui/Makefile.am
===================================================================
--- evolution-3.10.1.orig/smime/gui/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/smime/gui/Makefile.am	2013-10-20 10:16:38.677853456 +0200
@@ -44,7 +44,7 @@
 	$(GTKHTML_LIBS)					\
 	$(CERT_UI_LIBS)
 
-libevolution_smime_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libevolution_smime_la_LDFLAGS =  $(NO_UNDEFINED)
 
 ui_DATA = smime-ui.ui
 
Index: evolution-3.10.1/smime/lib/Makefile.am
===================================================================
--- evolution-3.10.1.orig/smime/lib/Makefile.am	2013-10-20 10:16:38.677853456 +0200
+++ evolution-3.10.1/smime/lib/Makefile.am	2013-10-20 10:16:38.677853456 +0200
@@ -36,6 +36,6 @@
 	$(GTKHTML_LIBS)				\
 	$(CERT_UI_LIBS)
 
-libessmime_la_LDFLAGS = -avoid-version $(NO_UNDEFINED)
+libessmime_la_LDFLAGS =  $(NO_UNDEFINED)
 
 -include $(top_srcdir)/git.mk
